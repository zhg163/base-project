

模型层设计
1、封装redis访问服务，实现增删改查
2、封面mongodb 访问服务，实现增删改查
3、会话的实现增删改查

对系统模型服务进行设计。
1、使用langchain 管理记忆、多模型切换 、支持根据角色选择使用prompt 、根据敏感词、日常沟通判断是否执行回复和rag调用 
2、回复支持 基础、 流式 、sse 
3、抽象出功能单一的类，处理单一功能
4、配置模型配置从.env中获取
5、


class_id: str = Field(..., description="聊天室ID")
class_name: str = Field(..., description="聊天室名称")
user_id: str = Field(..., description="用户ID")
user_name: str = Field(..., description="用户名称")
roles: List[RoleInfo] = Field(..., description="角色列表")

1、按上面的数据结构创建 mongodb的用户会话集合,名称为custom_session,实现对集合的增删改查方法
2、方法统一使用异步方式
3、api的接口url 名称和参数，新增与session_creator.html ，查询和删除与@session_manager.html 中的请求保持一致
4、各层命名使用“工程规范.md” 中的要求。
5、回顾聊天记录中的错误，再本次任务中不要再出现


前端发起聊天，传参数 消息内容， 会话id ，用户id ，用户名

后台收到参数，根据会话id 从redis中获取该聊天室中的所有角色

将消息内容和所有角色的prompt 信息发个大模型，大模型判断消息信息和每个角色的相关性，选择相关性高的角色，

前端传角色id和名称，如何